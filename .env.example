# ===== Admin (single-user) auth =====
ADMIN_USERNAME=admin
# Generate with: npm run hash-admin-password -- "<your password>"
# Local `.env` note: bcrypt hashes contain `$...$...$` which Next may treat as env expansion.
# If you see "Invalid username or password" locally, escape `$` as `\$` (or paste the escaped line printed by the script).
ADMIN_PASSWORD_HASH=\$2a\$12\$REPLACE_ME
# Generate with: openssl rand -base64 32
SESSION_SECRET=REPLACE_ME

# Optional: used by the admin "Copy" button to copy the full public short link.
# If not set, admin pages derive it from request headers (works on Vercel).
PUBLIC_BASE_URL=https://example.com

# ===== KV provider =====
# Use Upstash Redis REST (works in Edge + Node runtimes).
UPSTASH_REDIS_REST_URL=https://YOUR-DB.upstash.io
UPSTASH_REDIS_REST_TOKEN=YOUR_TOKEN

# Optional: fetch timeout + retries for idempotent KV ops (GET/SET/etc).
UPSTASH_FETCH_TIMEOUT_MS=6500
UPSTASH_FETCH_MAX_ATTEMPTS=3

# Optional: namespace keys per environment/instance
KV_PREFIX=nrs

# ===== Redirect analytics hygiene =====
# Short window to ignore immediate repeat requests from the same (IP + User-Agent).
# This affects `valid_clicks` counting only (redirect behavior is unchanged).
CLICK_DEDUPE_WINDOW_SECONDS=3
